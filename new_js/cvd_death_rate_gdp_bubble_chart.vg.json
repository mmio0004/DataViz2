{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 817,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/mmio0004/DataViz2/main/data/Cleaned_Cardiovascular_Death_Rate_Dataset_with_Continents__2021.csv"
  },
  "transform": [
    {
      "filter": "datum['Age-standardized death rate from cardiovascular diseases among both sexes'] > 0"
    }
  ],
  "encoding": {
    "x": {
      "field": "GDP per capita, PPP (constant 2017 international $)",
      "type": "quantitative",
      "title": "GDP per Capita (USD 2017 Rate) [Log Scale]",
      "axis": {"tickCount": 7},
      "scale": {"type": "log", "domain": [500, 150000]}
    },
    "y": {
      "field": "Age-standardized death rate from cardiovascular diseases among both sexes",
      "type": "quantitative",
      "title": "Death Rate (per 100,000 People) [Log Scale]",
      "axis": {"tickCount": 6},
      "scale": {"type": "log", "domain": [50, 1000]}
    }
  },
  "layer": [
    {
      "mark": "circle",
      "encoding": {
        "size": {
          "field": "Population (historical)",
          "type": "quantitative",
          "title": "Population Size",
          "scale": {
            "type": "threshold",
            "domain": [1000000, 10000000, 50000000, 100000000, 500000000],
            "range": [30, 100, 200, 300, 500, 900]
          },
          "legend": {
            "format": ".1s",
            "labelFontSize": 11,
            "titleFontSize": 11
          }
        },
        "color": {
          "field": "Continent",
          "type": "nominal",
          "scale": {
            "domain": [
              "Africa",
              "Asia",
              "Europe",
              "Americas",
              "Oceania"
            ],
            "range": [
              "#a53922",
              "#377eb8",
              "#4daf4a",
              "#984ea3",
              "#ff7f00"
            ]
          }
        },
        "opacity": {"value": 0.6},
        "tooltip": [
          {"field": "Entity", "type": "nominal", "title": "Country"},
          {
            "field": "GDP per capita, PPP (constant 2017 international $)",
            "type": "quantitative",
            "title": "GDP per Capita (USD 2017 Rate)",
            "format": ".2f"
          },
          {
            "field": "Age-standardized death rate from cardiovascular diseases among both sexes",
            "type": "quantitative",
            "title": "Death Rate (per 100,000 People)",
            "format": ".2f"
          },
          {
            "field": "Population (historical)",
            "type": "quantitative",
            "title": "Population Size",
            "format": ",.0f"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "middle",
        "dx": -12,
        "fontSize": 11,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {"field": "Entity", "type": "nominal"},
        "color": {"value": "black"},
        "opacity": {
          "condition": {
            "test": "datum['Entity'] == 'Burundi' || datum['Entity'] == 'Sudan' || datum['Entity'] == 'Russia' || datum['Entity'] == 'China' || datum['Entity'] == 'United States' || datum['Entity'] == 'India' || datum['Entity'] == 'Australia' || datum['Entity'] == 'Malaysia'",
            "value": 1
          },
          "value": 0
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 150},
        "y": {"value": 405}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Kenya'",
            "value": "Kenya's tobacco control efforts,"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 150},
        "y": {"value": 418}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Kenya'",
            "value": "have reduced smoking rates,"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 150},
        "y": {"value": 431}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Kenya'",
            "value": "a key heart disease risk factor"
          }
        }
      }
    },
    {
      "mark": {
        "type": "rule",
        "stroke": "black",
        "strokeWidth": 1
      },
      "encoding": {
        "x": {"value": 250},
        "x2": {"value": 310},
        "y": {"value": 390}, 
        "y2": {"value": 357}
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 50},
        "y": {"value": 60},  
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Afghanistan'",
            "value": "Decades of war and conflict have"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 50},
        "y": {"value": 73},  
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Afghanistan'",
            "value": "devastated Afghanistan’s healthcare"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 50},
        "y": {"value": 86},  
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Afghanistan'",
            "value": "system and infrastructure"
          }
        }
      }
    },
    {
      "mark": {
        "type": "rule",
        "stroke": "black",
        "strokeWidth": 1
      },
      "encoding": {
        "x": {"value": 150},
        "x2": {"value":155},
        "y": {"value": 90}, 
        "y2": {"value": 130} 
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 495},
        "y": {"value": 100},  
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Moldova'",
            "value": "Moldova has one of the highest per capita"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 495},
        "y": {"value": 113},  
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'Moldova'",
            "value": "alcohol consumption rates in the world"
          }
        }
      }
    },
    {
      "mark": {
        "type": "rule",
        "stroke": "black",
        "strokeWidth": 1
      },
      "encoding": {
        "x": {"value": 500},
        "x2": {"value":480},
        "y": {"value": 100}, 
        "y2": {"value": 130} 
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 335},
        "y": {"value": 543}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'South Korea'",
            "value": "South Korea’s advanced healthcare and"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 335},
        "y": {"value": 556}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'South Korea'",
            "value": "low smoking rates have driven the lowest"
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 10,
        "dy": -5,
        "fontSize": 11
      },
      "encoding": {
        "x": {"value": 335},
        "y": {"value": 569}, 
        "color": {"value": "black"},
        "text": {
          "condition": {
            "test": "datum.Entity === 'South Korea'",
            "value": "cardiovascular death rates in Asia"
          }
        }
      }
    },
    {
      "mark": {
        "type": "rule",
        "stroke": "black",
        "strokeWidth": 1
      },
      "encoding": {
        "x": {"value": 550},
        "x2": {"value": 630},
        "y": {"value": 547}, 
        "y2": {"value": 563}
      }
    }
  ]
}
